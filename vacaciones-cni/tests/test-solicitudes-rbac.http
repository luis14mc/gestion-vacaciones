###
# üß™ PRUEBAS RBAC - GET /api/solicitudes
# Sistema de Gesti√≥n de Vacaciones - CNI
# D√≠a 2, Actividad 2.1
###

@baseUrl = http://localhost:3000
@apiUrl = {{baseUrl}}/api

### 1Ô∏è‚É£ Login como ADMIN
# POST {{apiUrl}}/auth/session
POST {{baseUrl}}/api/auth/callback/credentials
Content-Type: application/json

{
  "email": "admin@cni.hn",
  "password": "Admin123!"
}

### 2Ô∏è‚É£ GET Solicitudes como ADMIN (debe ver todas)
GET {{apiUrl}}/solicitudes
Cookie: next-auth.session-token=TOKEN_AQUI

### 3Ô∏è‚É£ Login como RRHH
POST {{baseUrl}}/api/auth/callback/credentials
Content-Type: application/json

{
  "email": "rrhh@cni.hn",
  "password": "Admin123!"
}

### 4Ô∏è‚É£ GET Solicitudes como RRHH (debe ver todas)
GET {{apiUrl}}/solicitudes
Cookie: next-auth.session-token=TOKEN_AQUI

### 5Ô∏è‚É£ Login como JEFE
POST {{baseUrl}}/api/auth/callback/credentials
Content-Type: application/json

{
  "email": "jefe.tecnologia@cni.hn",
  "password": "Admin123!"
}

### 6Ô∏è‚É£ GET Solicitudes como JEFE (debe ver solo propias)
GET {{apiUrl}}/solicitudes
Cookie: next-auth.session-token=TOKEN_AQUI

### 7Ô∏è‚É£ Login como EMPLEADO
POST {{baseUrl}}/api/auth/callback/credentials
Content-Type: application/json

{
  "email": "empleado@cni.hn",
  "password": "Admin123!"
}

### 8Ô∏è‚É£ GET Solicitudes como EMPLEADO (debe ver solo propias)
GET {{apiUrl}}/solicitudes
Cookie: next-auth.session-token=TOKEN_AQUI

### 9Ô∏è‚É£ GET con filtro de usuarioId como ADMIN (debe funcionar)
GET {{apiUrl}}/solicitudes?usuarioId=4
Cookie: next-auth.session-token=TOKEN_ADMIN

### üîü GET con filtro de usuarioId como EMPLEADO (debe ignorar filtro)
GET {{apiUrl}}/solicitudes?usuarioId=1
Cookie: next-auth.session-token=TOKEN_EMPLEADO
